<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grand Guide - Wiki - Grand Fantasia Database</title>

    <!-- Animations Sheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <!-- Fonts Sheets -->
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600&family=Iceland&family=Inter:wght@100;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS Sheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Adiciona ícones para diferentes qualidades */
        .item-quality.high::before {
            content: '\f005'; /* Código do ícone de estrela cheia */
            font-family: 'Font Awesome 5 Free'; /* Biblioteca de ícones */
            color: #FFD700; /* Cor dourada para alta qualidade */
            margin-right: 8px;
        }

        .item-quality.medium::before {
            content: '\f006'; /* Código do ícone de estrela meia cheia */
            font-family: 'Font Awesome 5 Free'; /* Biblioteca de ícones */
            color: #C0C0C0; /* Cor prata para média qualidade */
            margin-right: 8px;
        }

        .item-quality.low::before {
            content: '\f005'; /* Código do ícone de estrela cheia */
            font-family: 'Font Awesome 5 Free'; /* Biblioteca de ícones */
            color: #CD5C5C; /* Cor cobre para baixa qualidade */
            margin-right: 8px;
        }

        /* Estilo para o status verificado */
        .item-status.verificado {
            color: #28a745; /* Cor verde para itens verificados */
        }

        /* Estilo para o status pendente */
        .item-status.pendente {
            color: #ffc107; /* Cor amarela para itens pendentes */
        }

        /* Ícones para os status */
        .item-status.verificado i {
            content: '\f058'; /* Ícone de círculo com check */
        }

        .item-status.pendente i {
            content: '\f071'; /* Ícone de triângulo com alerta */
        }

        .user-profile {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .user-icon {
            width: 50px; /* Ajuste o tamanho conforme necessário */
            height: 50px;
            border-radius: 50%; /* Torna a imagem redonda */
            object-fit: cover; /* Ajusta a imagem para preencher o contêiner */
            margin-right: 10px;
        }

        .user-name {
            font-size: 18px;
            font-weight: 600;
            font-family: 'Inter', sans-serif; /* Utilize a fonte de sua escolha */
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Barra Lateral -->
        <aside class="sidebar">
            <div class="logo">
                <img src="/public/favicon.ico" alt="Logo">
                <span class="logo-text">Grand Guide</span>
            </div>
            <ul>
                <li id="all-items-btn"><i class="fas fa-list-ul"></i> Todos os Itens</li>
                <li data-category="arma"><i class="fas fa-crosshairs"></i> Armas</li>
                <li data-category="armadura"><i class="fas fa-shield-alt"></i> Armaduras</li>
                <li data-category="fantasia"><i class="fas fa-hat-wizard"></i> Fantasias</li>
                <li data-category="receita"><i class="fas fa-scroll"></i> Receitas</li>
                <li data-category="suprimento"><i class="fas fa-flask"></i> Suprimentos</li>
                <li data-category="pedra"><i class="fas fa-gem"></i> Pedras Rúnicas</li>
                <li data-category="nucleo"><i class="fas fa-cube"></i> Núcleos</li>
                <li data-category="montaria"><i class="fas fa-horse-head"></i> Montarias</li>
                <li data-category="trono"><i class="fas fa-chair"></i> Tronos</li>
            </ul>
        </aside>

        <!-- Conteúdo Principal -->
        <main class="main-content">
            <div class="header">
                <div class="breadcrumb">
                    <a href="https://grand-guide.github.io/" class="breadcrumb-link">INÍCIO</a> / 
                    <span class="current">ITEMS</span>
                </div>
            </div>

            <!-- Ferramentas -->
            <div class="tools">
          <button class="add-btn"><i class="fas fa-plus"></i> Contribuir</button>
          <div class="search-bar">
        <input type="text" id="search-input" placeholder="Buscar itens">
        <button type="submit"><i class="fas fa-search"></i></button>
          </div>
            </div>



            <!-- Filtros/Informações -->
            <div class="filters">
                <span>ID</span>
                <span>NOME</span>
                <span>ICON</span>
                <span>DESCRIÇÃO</span>
                <span>VALOR</span>
                <span>ATUALIZADO EM</span>
                <span>STATUS</span>
                <span>QUALIDADE</span>
            </div>
            
            <!-- Lista de Itens -->
            <div class="item-list" id="item-list">
                <!-- Os itens serão carregados dinamicamente aqui -->
            </div>

            <!-- Navegador de Páginas -->
            <div class="pagination">
                <span class="pagination-button" id="prev-page">
                    <i class="fas fa-chevron-left"></i>
                </span>
                <span id="page-numbers"></span>
                <span class="pagination-button" id="next-page">
                    <i class="fas fa-chevron-right"></i>
                </span>
            </div>

        </main>
    </div>

    <script>
        const itemsPerPage = 12;
        let currentPage = 1;
        let originalItems = [];
        let filteredItems = [];

        // Função para carregar itens do arquivo JSON
        async function loadItems(category = null) {
            const file = category ? `${category}.json` : 'items.json'; // Carrega o arquivo de acordo com a categoria, 'items.json' é o padrão
            try {
                const response = await fetch(file);
                originalItems = await response.json();
                filteredItems = [...originalItems];
                currentPage = 1; // Reinicia para a primeira página ao carregar nova categoria
                displayItems();
                setupPagination();
            } catch (error) {
                console.error('Erro ao carregar os itens:', error);
            }
        }

        // Evento de clique nas categorias da barra lateral
        document.querySelectorAll('.sidebar ul li').forEach(item => {
            item.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                loadItems(category); // Carrega os itens da categoria clicada
            });
        });

        // Carrega 'items.json' ao iniciar a página
        loadItems();

        // Função para exibir itens da página atual
        function displayItems() {
            const itemList = document.getElementById('item-list');
            itemList.innerHTML = '';

            const start = (currentPage - 1) * itemsPerPage;
            const end = Math.min(start + itemsPerPage, filteredItems.length);

            for (let i = start; i < end; i++) {
                const item = filteredItems[i];
                const itemElement = document.createElement('div');
                itemElement.classList.add('item', 'animate__animated', 'animate__fadeInUp');

                // Determine a classe de qualidade com base no item
                const qualityClass = `item-quality ${getQualityClass(item.quality)}`;

                itemElement.innerHTML = `
                    <span class="item-id">${item.id}</span>
                    <span class="item-name">${item.name}</span>
                    <img src="${item.cover}" alt="${item.name}" class="item-cover">
                    <span class="item-description">${item.description}</span>
                    <span class="item-price">${item.price}</span>
                    <span class="item-updated">${item.updated}</span>
                    <span class="item-status ${item.status}"><i class="fas ${getStatusIcon(item.status)}"></i></span>
                    <span class="${qualityClass}">${item.quality}</span>
                `;

                itemList.appendChild(itemElement);
            }
        }

        // Função para obter a classe de qualidade
        function getQualityClass(quality) {
            switch (quality) {
                case 'alta': return 'high';
                case 'media': return 'medium';
                case 'baixa': return 'low';
                default: return '';
            }
        }

        // Função para obter o ícone de status
        function getStatusIcon(status) {
            return status === 'verificado' ? 'fa-check-circle' : 'fa-exclamation-triangle';
        }

        // Função para configurar a paginação
        function setupPagination() {
            const pageNumbers = document.getElementById('page-numbers');
            pageNumbers.innerHTML = '';

            const totalPages = Math.ceil(filteredItems.length / itemsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const pageNumber = document.createElement('span');
                pageNumber.textContent = i;
                pageNumber.classList.add('pagination-page');
                if (i === currentPage) {
                    pageNumber.classList.add('active');
                }
                pageNumber.addEventListener('click', () => {
                    currentPage = i;
                    displayItems();
                    setupPagination();
                });
                pageNumbers.appendChild(pageNumber);
            }

            document.getElementById('prev-page').style.display = currentPage === 1 ? 'none' : 'inline';
            document.getElementById('next-page').style.display = currentPage === totalPages ? 'none' : 'inline';
        }

        // Adiciona evento de busca
        document.getElementById('search-input').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            filteredItems = originalItems.filter(item => 
                item.name.toLowerCase().includes(query) || item.id.toLowerCase().includes(query)
            );
            currentPage = 1;
            displayItems();
            setupPagination();
        });

        // Adiciona eventos de navegação
        document.getElementById('prev-page').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                displayItems();
                setupPagination();
            }
        });

        document.getElementById('next-page').addEventListener('click', () => {
            const totalPages = Math.ceil(filteredItems.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                displayItems();
                setupPagination();
            }
        });

        // Função para carregar as informações do usuário
        async function loadUserInfo() {
            try {
                const response = await fetch('/pages/items/user-info.json');
                const userInfo = await response.json();
                
                document.getElementById('user-icon').src = userInfo.icon; // A URL do ícone do usuário
                document.getElementById('user-name').textContent = userInfo.name; // O nome do usuário
            } catch (error) {
                console.error('Erro ao carregar as informações do usuário:', error);
            }
        }

        // Carrega as informações do usuário ao iniciar a página
        loadUserInfo();
    </script>
</body>
</html>
